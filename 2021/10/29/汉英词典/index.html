<!DOCTYPE html>


<html lang="zh-CN">
  

    <head>
      <meta charset="utf-8" />
        
      <meta
        name="viewport"
        content="width=device-width, initial-scale=1, maximum-scale=1"
      />
      <title>汉英词典 |  半亩方塘</title>
  <meta name="generator" content="hexo-theme-ayer">
      
      <link rel="shortcut icon" href="/favicon.ico" />
       
<link rel="stylesheet" href="/dist/main.css">

      <link
        rel="stylesheet"
        href="https://cdn.jsdelivr.net/gh/Shen-Yu/cdn/css/remixicon.min.css"
      />
      
<link rel="stylesheet" href="/css/custom.css">
 
      <script src="https://cdn.jsdelivr.net/npm/pace-js@1.0.2/pace.min.js"></script>
       
 

      <link
        rel="stylesheet"
        href="https://cdn.jsdelivr.net/npm/@sweetalert2/theme-bulma@5.0.1/bulma.min.css"
      />

      <!-- jquery，懒加载、统计、说说需要的jquery -->
      <script src="https://cdn.bootcdn.net/ajax/libs/jquery/3.5.1/jquery.min.js"></script>

      <!-- Highlight.js -->
      <link href="https://cdn.bootcdn.net/ajax/libs/highlight.js/9.18.1/styles/a11y-dark.min.css" rel="stylesheet">
      <script src="https://cdn.bootcdn.net/ajax/libs/highlight.js/9.18.1/highlight.min.js"></script>
      <script>hljs.initHighlightingOnLoad();</script>

      <!-- 封面标闪烁 -->
      <link rel="stylesheet" href="/css/zhyBlogTitle.css">

      <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11.0.19/dist/sweetalert2.min.js"></script>

      <!-- mermaid -->
      
      <style>
        .swal2-styled.swal2-confirm {
          font-size: 1.6rem;
        }
      </style>
    <link rel="alternate" href="/atom.xml" title="半亩方塘" type="application/atom+xml">
</head>
  </html>
</html>


<body>
  <div id="app">
    
      
    <main class="content on">
      <section class="outer">
  <article
  id="post-汉英词典"
  class="article article-type-post"
  itemscope
  itemprop="blogPost"
  data-scroll-reveal
>
  <div class="article-inner">
    
    <header class="article-header">
       
<h1 class="article-title sea-center" style="border-left:0" itemprop="name">
  汉英词典
</h1>
 

      
    </header>
     
    <div class="article-meta">
      <a href="/2021/10/29/%E6%B1%89%E8%8B%B1%E8%AF%8D%E5%85%B8/" class="article-date">
  <time datetime="2021-10-28T16:33:11.000Z" itemprop="datePublished">2021-10-29</time>
</a> 
  <div class="article-category">
    <a class="article-category-link" href="/categories/%E9%A1%B9%E7%9B%AE/">项目</a>
  </div>
  
<div class="word_count">
    <span class="post-time">
        <span class="post-meta-item-icon">
            <i class="ri-quill-pen-line"></i>
            <span class="post-meta-item-text"> 字数统计:</span>
            <span class="post-count">3.6k</span>
        </span>
    </span>

    <span class="post-time">
        &nbsp; | &nbsp;
        <span class="post-meta-item-icon">
            <i class="ri-book-open-line"></i>
            <span class="post-meta-item-text"> 阅读时长≈</span>
            <span class="post-count">19 分钟</span>
        </span>
    </span>
</div>
 
    </div>
      
    <div class="tocbot"></div>




  
    <div class="article-entry" itemprop="articleBody">
       
  <h3 id="前言："><a href="#前言：" class="headerlink" title="前言："></a>前言：</h3><p>我的大一下学期实训项目是好记星移动词典，基本功能是已知中文找英文，已知英文找中文，还要词典词条的增删查改，由于前俩天我就实现了这些功能，于是在之后我又增添了一个登录系统，虽然好像用处不大，但也还是我第一次写这种多文件互动的项目，写的比较用心，下面将附上项目源代码，和文件下载地址(文件是公开在本人的Github上的，有需要的可以随时取用,<strong>其中有7个文件，只要全都下载时，项目才能正常运行，且项目是通过main.c启动的</strong>)。</p>
<h3 id="文件链接-https-github-com-QshuRyaoF-ECdicttionary-tree-main-Dictionary"><a href="#文件链接-https-github-com-QshuRyaoF-ECdicttionary-tree-main-Dictionary" class="headerlink" title="文件链接:https://github.com/QshuRyaoF/ECdicttionary/tree/main/Dictionary"></a>文件链接:<a target="_blank" rel="noopener" href="https://github.com/QshuRyaoF/ECdicttionary/tree/main/Dictionary">https://github.com/QshuRyaoF/ECdicttionary/tree/main/Dictionary</a></h3><h3 id="运行效果图："><a href="#运行效果图：" class="headerlink" title="运行效果图："></a>运行效果图：</h3><p><img src="https://cdn.jsdelivr.net/gh/QshuRyaoF/MyPictureBed@master/img/image-20211029005243741.png" alt="image-20211029005243741"></p>
<h3 id="Main-c"><a href="#Main-c" class="headerlink" title="Main.c"></a>Main.c</h3><pre><code class="c">#include &lt;stdio.h&gt;
#include &lt;conio.h&gt;
#include &lt;string.h&gt;
#include &lt;stdlib.h&gt;
#include &quot;function.h&quot;
#include &quot;dictionary.c&quot;  


int main(int argc,char **argv)
&#123;
    printf(&quot;\033[;36;5m ******************************************** \033[0m\n&quot;);
    printf(&quot;\033[;36;5m *               电子词典项目               * \033[0m\n&quot;);
    printf(&quot;\033[;36;5m ******************************************** \033[0m\n&quot;);
    printf(&quot;\033[;36;5m *     1. 注册     2. 登录     3. 退出      * \033[0m\n&quot;);
    printf(&quot;\033[;36;5m ******************************************** \033[0m\n&quot;);
    int choice,flag;
    char FILENAME[20]=&quot;user.txt&quot;;
    read(user,&amp;numofuser,FILENAME);
    printf(&quot;请输入：&quot;);
    scanf(&quot;%d&quot;,&amp;choice);
    switch (choice)
    &#123;
    case 1:sign_in(&amp;numofuser,FILENAME,user);
        break;
    case 2:login(&amp;numofuser,user);
        break;
    case 3:printf(&quot;\033[;31;5m   即将退出，欢迎您再次使用！  \033[0m\n&quot;);
        break;
    default:printf(&quot;\033[;31;5m   输入错误，请重新输入！！！  \033[0m\n&quot;);
        break;
    &#125;

    return 0;
&#125;

//统计函数
void read(struct userlist user[],int *numofuser,char filename[])&#123;
    FILE *fp;
    fp=fopen(filename,&quot;r&quot;);
    if(fp!=NULL)&#123;
        while(!feof(fp))&#123;
            fscanf(fp,&quot;%s %s %d&quot;,&amp;user[*numofuser].name,&amp;user[*numofuser].pwd,&amp;user[*numofuser].numofmemwd);
            (*numofuser)++;
        &#125;
    &#125;else&#123;
        printf(&quot;\033[;31;5m文件读取失败！！！ \033[0m\n&quot;);
    &#125;
    fclose(fp);
&#125;

//注册函数
void sign_in(int *numofuser,char filename[],struct userlist user[])&#123;
    char keyn[10],keyp1[20],keyp2[20];
    printf(&quot;用户名：&quot;);
    scanf(&quot;%s&quot;,&amp;keyn);
    for(int i=0;i&lt;*numofuser;i++)&#123;
        if(strcmp(user[i].name,keyn)==0)&#123;
            printf(&quot;\033[;31;5m    该用户已经注册,请登录！\033[0m\n&quot;);
            sign_in(&amp;(*numofuser),filename,user);
            return;
        &#125;
    &#125;
    printf(&quot;密  码：&quot;);
    int i = 0;
    char c;
    while (1)
    &#123;
        //getch()这个函数是一个不回显函数，当用户按下某个字符时，函数自动读取，无需按回车
        //函数用途：从控制台读取一个字符，但不显示在屏幕上
        c = getch();
        //如果按下Esc键可以退出
        if((c-48) == (-21))&#123;
            printf(&quot;\n\033[;31;1m      退出成功！     \033[0m\n&quot;);
                return;
        &#125;
        //windows平台下按下回车（ENTER）键会产生两个转义字符 \r\n，因此getch返回13(\r)，
        //                而&#39;\n‘的的转义字符无法读取，因此无法通过判断&#39;\n&#39;的方式结束输入，
        //可以通过读取第一个转义字符进行判断结束输入
        if (c == &#39;\r&#39;)//按下回车键时结束输入，退出
        &#123;
            keyp1[i] = &#39;\0&#39;;
            break;
        &#125;
        if (c == &#39;\b&#39;)//遇到退格键时（←Backsapce)
        &#123;
            //当没有输入密码时，即输入的密码为空时，不进行任何操作
            //即输入的密码不为空时，对显示的字符进行退格
            if (i &gt; 0) 
            &#123; 
                i--;
                //对显示的字符进行退格，两个\b之间存在一个空格
                printf(&quot;\b \b&quot;);
                        
                keyp1[i] = &#39;\0&#39;;//修改输入的字符
                continue;
            &#125;
        &#125;
        else//没有遇到回车键时和退格键时，读取输入的密码存储在字符串password中
        &#123;
            printf(&quot;*&quot;);    //对输入的密码在控制台显示*号
            keyp1[i] = c;//存储输入的字符        
            if (i &lt; 20) i++;
            else break;
        &#125;
    &#125;
    printf(&quot;\n&quot;);
    if (i &gt; 0) ;
    else  printf(&quot;输入的密码为空&quot;);
    printf(&quot;请确认密码&quot;);
    int j = 0;
    char d;
    while (1)
    &#123;
        d = getch();
        if((d-48) == (-21))&#123;
            printf(&quot;\n\033[;31;1m      退出成功！     \033[0m\n&quot;);
            return;
        &#125;
        if (d == &#39;\r&#39;)
        &#123;
            keyp2[j] = &#39;\0&#39;;
            break;
        &#125;
        if (d == &#39;\b&#39;)
        &#123;
            if (j &gt; 0) 
            &#123; 
                j--;
                printf(&quot;\b \b&quot;);    
                keyp2[j] = &#39;\0&#39;;
                continue;
            &#125;
        &#125;
        else
        &#123;
            printf(&quot;*&quot;);
            keyp2[j] = d;    
            if (j &lt; 20) j++;
            else break;
        &#125;
    &#125;
     
    printf(&quot;\n&quot;);
    if (j &gt; 0) ;
    else  printf(&quot;输入的密码为空&quot;);
    if(strcmp(keyp1,keyp2)!=0)&#123;
        printf(&quot;\033[;31;5m   两次输入密码不一致，请重新输入! \033[0m\n&quot;);
        sign_in(&amp;(*numofuser),filename,user);
    &#125;
    int flag=0;   
    strcpy(user[*numofuser].name,keyn);
    strcpy(user[*numofuser].pwd,keyp1);
    user[*numofuser].numofmemwd=0;
    (*numofuser)++;
    FILE *fp;
    fp=fopen(filename,&quot;w&quot;);
    if(fp!=NULL)&#123;
        for(int k=0;k&lt;(*numofuser)-1;k++)&#123;
            fprintf(fp,&quot;%s %s %d\n&quot;,user[k].name,user[k].pwd,user[k].numofmemwd);
        &#125;
        fprintf(fp,&quot;%s %s %d&quot;,user[*numofuser-1].name,user[*numofuser-1].pwd,user[*numofuser-1].numofmemwd);
    &#125;else&#123;
        printf(&quot;文件打开失败\n&quot;);
    &#125;
    fclose(fp);
    printf(&quot;\n\033[;31;5m      %s,恭喜您，注册成功\033[0m\n&quot;,keyn);
    printf(&quot;请重新登录！\n&quot;);
    login(&amp;(*numofuser),user);
    flag=1;      
    if(flag==0)&#123;
        printf(&quot;\033[;31;5m注册失败!!!\033[0m\n&quot;);
    &#125;
&#125;

//登录函数
void login(int *numofuser,struct userlist user[])&#123;
    char keyn[10],keyp[20];
    while(1)&#123;
        printf(&quot;用户名：&quot;);
        scanf(&quot;%s&quot;,keyn);
        printf(&quot;密  码：&quot;);
        int i = 0,flag=0;
        char c;
        while (1)
        &#123;
            c = getch();
            if((c-48) == (-21))&#123;
                printf(&quot;\n\033[;31;1m      退出成功！     \033[0m\n&quot;);
                return;
            &#125;
            if (c == &#39;\r&#39;)
            &#123;
                keyp[i] = &#39;\0&#39;;
                break;
            &#125;
            if (c == &#39;\b&#39;)
            &#123;
                if (i &gt; 0) 
                &#123; 
                    i--;
                    printf(&quot;\b \b&quot;);    
                    keyp[i] = &#39;\0&#39;;
                    continue;
                &#125;
            &#125;
            else
            &#123;
                printf(&quot;*&quot;);
                keyp[i] = c;    
                if (i &lt; 20) i++;
                else break;
            &#125;
        &#125;
        printf(&quot;\n&quot;);
        if (i &gt; 0) ;
        else  printf(&quot;输入的密码为空&quot;);
        for(int i=0;i&lt;*numofuser;i++)&#123;
            if(strcmp(keyn,user[i].name)==0&amp;&amp;strcmp(keyp,user[i].pwd)==0)&#123;
                printf(&quot;\n\033[;31;1m      %s,恭喜您，登录成功! \033[0m\n&quot;,keyn);
                flag=1;
                fakemain(user[i].name);
                return;
            &#125;
        &#125;
        if(flag==0)&#123;
            printf(&quot;\033[;31;5m     用户名或密码错误，请重新输入!!! \033[0m\n&quot;);
        
        &#125;
    &#125; 
&#125;
</code></pre>
<h3 id="dictionary-c"><a href="#dictionary-c" class="headerlink" title="dictionary.c"></a>dictionary.c</h3><pre><code class="c">#include &lt;stdio.h&gt;
#include &lt;string.h&gt;
#include &lt;stdlib.h&gt;
#include &quot;function.h&quot;

//本文件的主函数
void fakemain(char name[])
&#123;
    struct entry ent[10000];
    int numofwords = 0, choose;
    char FILEPATH[30] = &quot;new_dictionary.txt&quot;;
    search(FILEPATH, ent, &amp;numofwords);
    UI(&amp;numofwords, ent, FILEPATH, &amp;choose, name);
    return;
&#125;

//查询有多少个词条的功能函数
void search(char filepath[], struct entry ent[], int *numofwords)
&#123;
    FILE *fp;
    fp = fopen(filepath, &quot;a+&quot;);
    if (fp != NULL)
    &#123;
        while (!feof(fp))
        &#123;
            fscanf(fp, &quot;%s %s&quot;, &amp;ent[*numofwords].english, &amp;ent[*numofwords].chinese);
            (*numofwords)++;
        &#125;
    &#125;
    else
    &#123;
        printf(&quot;\033[;31;5m文件读取失败！！！ \033[0m\n&quot;);
    &#125;
    fclose(fp);
&#125;

//英译汉功能函数
void E2C(int *numofwords, struct entry ent[])
&#123;
    char key[20];
    while (1)
    &#123;
        printf(&quot;请输入要查询的词(输入0000退出查询)：&quot;);
        scanf(&quot;%s&quot;, key);
        if (strcmp(key, &quot;0000&quot;) == 0)
        &#123;
            return;
        &#125;
        int flag = 0;
        for (int i = 0; i &lt; *numofwords; i++)
        &#123;
            if (strcmp(key, ent[i].english) == 0)
            &#123;
                printf(&quot;\033[;33;5m\&quot;%s\&quot; 的中文释义为：%s\033[0m\n&quot;, ent[i].english, ent[i].chinese);
                flag = 1;
                break;
            &#125;
        &#125;
        if (flag == 0)
        &#123;
            printf(&quot;\033[;31;5m查无此词!!!\033[0m\n&quot;);
        &#125;
    &#125;
&#125;

//汉译英功能函数
void C2E(int *numofwords, struct entry ent[])
&#123;
    char key[20];
    while (1)
    &#123;
        printf(&quot;请输入要查询的词(输入0000退出查询):&quot;);
        scanf(&quot;%s&quot;, key);
        if (strcmp(key, &quot;0000&quot;) == 0)
        &#123;
            return;
        &#125;
        int flag = 0;
        for (int i = 0; i &lt; *numofwords; i++)
        &#123;
            if (strstr(ent[i].chinese, key) != NULL)
            &#123;
                printf(&quot;\033[;33;5m\&quot;%s\&quot; 对应的英文是：\&quot;%s\&quot;\033[0m\n&quot;, ent[i].chinese, ent[i].english);
                flag++;
            &#125;
        &#125;
        if (flag == 0)
        &#123;
            printf(&quot;\033[;31;5m查无此词!!!\033[0m\n&quot;);
        &#125;
    &#125;
&#125;

//删除词条功能函数
void deleteentry(int *numofwords, struct entry ent[], char filepath[])
&#123;
    char key[20];
    printf(&quot;请输入要删去的词(输入0000退出删除):&quot;);
    scanf(&quot;%s&quot;, key);
    if (strcmp(key, &quot;0000&quot;) == 0)
    &#123;
        return;
    &#125;
    int flag = 0;
    for (int i = 0; i &lt; *numofwords; i++)
    &#123;
        if (strcmp(key, ent[i].english) == 0)
        &#123;
            for (int j = i; j &lt; (*numofwords) - 1; j++)
            &#123;
                ent[j] = ent[j + 1];
            &#125;
            (*numofwords)--;
            FILE *fp;
            fp = fopen(filepath, &quot;w+&quot;);
            if (fp != NULL)
            &#123;
                for (int k = 0; k &lt; (*numofwords) - 1; k++)
                &#123;
                    fprintf(fp, &quot;%s %s\n&quot;, ent[k].english, ent[k].chinese);
                &#125;
                fprintf(fp, &quot;%s %s&quot;, ent[*numofwords].english, ent[*numofwords].chinese);
                printf(&quot;\033[;33;5m词条删除成功!\033[0m\n&quot;);
            &#125;
            else
            &#123;
                printf(&quot;文件读取失败\n&quot;);
            &#125;
            fclose(fp);
            flag = 1;
            break;
        &#125;
    &#125;
    if (flag == 0)
    &#123;
        printf(&quot;\033[;31;5m查无此词!!!\033[0m\n&quot;);
    &#125;
&#125;

//用户操作界面
void UI(int *numofwords, struct entry ent[], char filepath[], int *choose, char name[])
&#123;
    /*操作界面*/
    printf(&quot;\n\033[;33;5m*************************************************\033[0m\n&quot;);
    printf(&quot;\033[;33;5m*                欢迎使用电子词典               *\033[0m\n&quot;);
    printf(&quot;\033[;33;5m*************************************************\033[0m\n&quot;);
    printf(&quot;\033[;33;5m*     1.英译汉      2.汉译英     3.删除词条     *\033[0m\n&quot;);
    printf(&quot;\033[;33;5m*     4.添加词条    5.修改词条   6.背单词       *\033[0m\n&quot;);
    printf(&quot;\033[;33;5m*               7. 保 存 并 退 出               *\033[0m\n&quot;);
    printf(&quot;\033[;33;5m*************************************************\033[0m\n&quot;);
    printf(&quot;\033[;33;5m当前字典一共用%d个单词\033[0m\n&quot;, *numofwords);

    //用户输入选择
    printf(&quot;请输入：&quot;);
    scanf(&quot;%d&quot;, &amp;(*choose));
    switch (*choose)
    &#123;
    case 1:
        E2C(&amp;(*numofwords), ent);
        UI(&amp;(*numofwords), ent, filepath, &amp;(*choose), name);
        break;
    case 2:
        C2E(&amp;(*numofwords), ent);
        UI(&amp;(*numofwords), ent, filepath, &amp;(*choose), name);
        break;
    case 3:
        deleteentry(&amp;(*numofwords), ent, filepath);
        UI(&amp;(*numofwords), ent, filepath, &amp;(*choose), name);
        break;
    case 4:
        addentry(&amp;(*numofwords), ent, filepath);
        UI(&amp;(*numofwords), ent, filepath, &amp;(*choose), name);
        break;
    case 5:
        modientry(&amp;(*numofwords), ent, filepath);
        UI(&amp;(*numofwords), ent, filepath, &amp;(*choose), name);
        break;
    case 6:reciteword(name,user,ent,&amp;numofuser);
        UI(&amp;(*numofwords), ent, filepath, &amp;(*choose), name);
        break;
    case 7:printf(&quot;\033[;31;5m        保存成功,欢迎再次使用!\033[0m\n&quot;);
        break;
    default:
        printf(&quot;\033[;31;5m输入错误，请重新输入!!!\033[0m\n&quot;);
        UI(&amp;(*numofwords), ent, filepath, &amp;(*choose), name);
        break;
    &#125;
    return;
&#125;

//添加词条功能函数
void addentry(int *numofwords, struct entry ent[], char filepath[])
&#123;
    char keye[20], keyc[20];
    printf(&quot;请输入要添加的单词(输入0000退出添加):&quot;);
    scanf(&quot;%s&quot;, &amp;keye);
    if (strcmp(keye, &quot;0000&quot;) == 0)
    &#123;
        return;
    &#125;
    for (int i = 0; i &lt; *numofwords; i++)
    &#123;
        if (strcmp(ent[i].english, keye) == 0)
        &#123;
            printf(&quot;该词已在单词库中！\n&quot;);
            return;
        &#125;
    &#125;
    printf(&quot;请输入中文释义:&quot;);
    scanf(&quot;%s&quot;, &amp;keyc);
    int flag = 0, tmp;
    for (int i = 0; i &lt; *numofwords; i++)
    &#123;
        if (strcmp(keye, ent[i].english) &gt; 0)
        &#123;
            tmp = i;
        &#125;
        else
        &#123;
            break;
        &#125;
    &#125;
    for (int j = *numofwords - 1; j &gt; tmp; j--)
    &#123;
        ent[j + 1] = ent[j];
    &#125;
    strcpy(ent[tmp + 1].english,keye);
    strcpy(ent[tmp + 1].chinese,keyc);
    (*numofwords)++;
    FILE *fp;
    fp = fopen(filepath, &quot;w&quot;);
    if (fp != NULL)
    &#123;
        for (int k = 0; k &lt; (*numofwords) - 1; k++)
        &#123;
            fprintf(fp, &quot;%s %s\n&quot;, ent[k].english, ent[k].chinese);
        &#125;
        fprintf(fp, &quot;%s %s&quot;, ent[*numofwords - 1].english, ent[*numofwords - 1].chinese);
    &#125;
    else
    &#123;
        printf(&quot;文件打开失败\n&quot;);
    &#125;
    fclose(fp);
    printf(&quot;\033[;33;5m添加成功！！！\033[0m\n&quot;);
    flag = 1;
    if (flag == 0)
    &#123;
        printf(&quot;添加失败!!!\n&quot;);
    &#125;
&#125;

//修改词条功能函数
void modientry(int *numofwords, struct entry ent[], char filepath[])
&#123;
    char key[20], keye[20], keyc[20];
    FILE *fp;
    int flag = 0, tmp;
    do
    &#123;
        printf(&quot;请输入要修改的单词(退出修改请输入0000):&quot;);
        scanf(&quot;%s&quot;, key);
        if (strcmp(key, &quot;0000&quot;) == 0)
        &#123;
            return;
        &#125;
        for (int i = 0; i &lt; *numofwords; i++)
        &#123;
            if (strcmp(key, ent[i].english) == 0)
            &#123;
                flag = 1;
                for (int j = i; j &lt; (*numofwords) - 1; j++)
                &#123;
                    ent[j] = ent[j + 1];
                &#125;
                (*numofwords)--;
                FILE *fp;
                fp = fopen(filepath, &quot;w&quot;);
                if (fp != NULL)
                &#123;
                    for (int k = 0; k &lt; (*numofwords) - 1; k++)
                    &#123;
                        fprintf(fp, &quot;%s %s\n&quot;, ent[k].english, ent[k].chinese);
                    &#125;
                    fprintf(fp, &quot;%s %s&quot;, ent[*numofwords].english, ent[*numofwords].chinese);
                    break;
                &#125;
            &#125;
        &#125;
        if (flag == 0)
        &#123;
            printf(&quot;\033[;31;5m查无此词！！！\033[0m\n&quot;);
        &#125;
    &#125; while (!flag);
    printf(&quot;请输入修改后的英文和中文(其间请用空格或换行隔开):\n&quot;);
    scanf(&quot;%s&quot;, keye);
    scanf(&quot;%s&quot;, keyc);
    for (int i = 0; i &lt; *numofwords; i++)
    &#123;
        if (strcmp(ent[i].english, keye) == 0)
        &#123;
            printf(&quot;\033[;31;5m该词已在单词库中！\033[0m\n&quot;);
            return;
        &#125;
    &#125;
    for (int i = 0; i &lt; *numofwords; i++)
    &#123;
        if (strcmp(keye, ent[i].english) &gt; 0)
        &#123;
            tmp = i;
        &#125;
        else
        &#123;
            break;
        &#125;
    &#125;
    for (int j = *numofwords - 1; j &gt; tmp; j--)
    &#123;
        ent[j + 1] = ent[j];
    &#125;
    strcpy(ent[tmp + 1].english, keye);
    strcpy(ent[tmp + 1].chinese, keyc);
    (*numofwords)++;
    fp = fopen(filepath, &quot;w&quot;);
    if (fp != NULL)
    &#123;
        for (int k = 0; k &lt; (*numofwords) - 1; k++)
        &#123;
            fprintf(fp, &quot;%s %s\n&quot;, ent[k].english, ent[k].chinese);
        &#125;
        fprintf(fp, &quot;%s %s&quot;, ent[*numofwords - 1].english, ent[*numofwords - 1].chinese);
        printf(&quot;\033[;33;5m修改完成!\033[0m\n&quot;);
    &#125;
    else
    &#123;
        printf(&quot;文件打开失败\n&quot;);
        return;
    &#125;
    fclose(fp);
&#125;

//背单词功能函数
void reciteword(char name[],struct userlist user[],struct entry ent[],int *numofuser)
&#123;
    int n, choice, station, m;
    FILE *fp;
    for (int i = 0; i &lt; *numofuser; i++)
    &#123;
        if (strcmp(user[i].name, name) == 0)
        &#123;
            station = user[i].numofmemwd;
            m = i;
            printf(&quot;\033[;35;5m     您已经背了%d个单词了，继续加油哦~(&#39;.&#39;)~\033[0m\n&quot;, user[i].numofmemwd);
        &#125;
    &#125;
    printf(&quot;\n\033[;34;5m*************************************\033[0m\n&quot;);
    printf(&quot;\033[;34;5m*      1.背新单词    2.复习单词     *\033[0m\n&quot;);
    printf(&quot;\033[;34;5m*************************************\033[0m\n&quot;);
    printf(&quot;请输入：&quot;);
    scanf(&quot;%d&quot;, &amp;choice);
    switch (choice)
    &#123;
        case 1:
        &#123;
            printf(&quot;请输入这次要背的单词数：&quot;);
            scanf(&quot;%d&quot;, &amp;n);
            for (int i = 0; i &lt; n; i++)
            &#123;
                printf(&quot;\033[;33;5m   %s %s\033[0m\n&quot;, ent[station + i].english, ent[station + i].chinese);
            &#125;
            printf(&quot;\033[;33;5m你是最棒的！~(&#39;o&#39;)~\033[0m\n&quot;);
            user[m].numofmemwd += n;
            fp = fopen(&quot;user.txt&quot;, &quot;w&quot;);
            if (fp != NULL)
            &#123;
                for (int k = 0; k &lt; (*numofuser)-1; k++)
                &#123;
                    fprintf(fp, &quot;%s %s %d\n&quot;, user[k].name, user[k].pwd, user[k].numofmemwd);
                &#125;
                fprintf(fp, &quot;%s %s %d&quot;, user[*numofuser - 1].name, user[*numofuser - 1].pwd, user[*numofuser - 1].numofmemwd);
            &#125;
                else
            &#123;
                printf(&quot;\033[;31;5m文件读取失败！！！ \033[0m\n&quot;);
            &#125;   
            fclose(fp);
        &#125;
            break;
        case 2:
        &#123;
            printf(&quot;请输入这次要复习的单词数：&quot;);
            scanf(&quot;%d&quot;, &amp;n);
            for (int i = 0; i &lt; n; i++)
            &#123;
                printf(&quot;\033[;33;5m   %s %s\033[0m\n&quot;, ent[station - i - 1].english, ent[station - i - 1].chinese);
            &#125;
            printf(&quot;\033[;33;5m你是最棒的！~(&#39;o&#39;)~\033[0m\n&quot;);
        &#125;
            break;
        default:printf(&quot;\033[;31;5m输入错误，请重新输入!!!\033[0m\n&quot;);
            reciteword(name,user,ent,&amp;(*numofuser));
            break;
    &#125;

&#125;
</code></pre>
<h3 id="function-h"><a href="#function-h" class="headerlink" title="function.h"></a>function.h</h3><pre><code class="c">#include&lt;stdio.h&gt; 
#ifndef function_h

#define function_h

#define MAXC 20
#define MAXE 20
#define total 10000

struct entry
&#123;
    char english[MAXE+1]; //key 
    char chinese[MAXC+1];
    struct entry *next;
&#125;;
struct userlist
&#123;
    char name[10];
    char pwd[20];
    int numofmemwd;
&#125;;

struct userlist user[1000];
int numofuser=0;

/*函数声明*/
void search(char filepath[],struct entry ent[],int *numofwords);
void E2C(int *numofwords,struct entry ent[]);
void C2E(int *numofwords,struct entry ent[]);
void deleteentry(int *numofwords,struct entry ent[],char filepath[]);
void UI(int *numofwords,struct entry ent[],char filepath[],int *choose,char name[]);
void addentry(int *numofwords,struct entry ent[],char filepath[]);
void modientry(int *numofwords,struct entry ent[],char filepath[]);
void fakemain(char name[]);
void read(struct userlist user[],int *numofuser,char filename[]);
void sign_in(int *numofuser,char filename[],struct userlist user[]);
void login(int *numofuser,struct userlist user[]);
void reciteword(char name[],struct userlist user[],struct entry ent[],int *numofuser);

#endif
</code></pre>
 
      <!-- reward -->
      
    </div>
    

    <!-- copyright -->
    
    <div class="declare">
      <ul class="post-copyright">
        <li>
          <i class="ri-copyright-line"></i>
          <strong>版权声明： </strong>
          
          本博客所有文章除特别声明外，著作权归作者所有。转载请注明出处！
          
        </li>
      </ul>
    </div>
    
    <footer class="article-footer">
       
<div class="share-btn">
      <span class="share-sns share-outer">
        <i class="ri-share-forward-line"></i>
        分享
      </span>
      <div class="share-wrap">
        <i class="arrow"></i>
        <div class="share-icons">
          
          <a class="weibo share-sns" href="javascript:;" data-type="weibo">
            <i class="ri-weibo-fill"></i>
          </a>
          <a class="weixin share-sns wxFab" href="javascript:;" data-type="weixin">
            <i class="ri-wechat-fill"></i>
          </a>
          <a class="qq share-sns" href="javascript:;" data-type="qq">
            <i class="ri-qq-fill"></i>
          </a>
          <a class="douban share-sns" href="javascript:;" data-type="douban">
            <i class="ri-douban-line"></i>
          </a>
          <!-- <a class="qzone share-sns" href="javascript:;" data-type="qzone">
            <i class="icon icon-qzone"></i>
          </a> -->
          
          <a class="facebook share-sns" href="javascript:;" data-type="facebook">
            <i class="ri-facebook-circle-fill"></i>
          </a>
          <a class="twitter share-sns" href="javascript:;" data-type="twitter">
            <i class="ri-twitter-fill"></i>
          </a>
          <a class="google share-sns" href="javascript:;" data-type="google">
            <i class="ri-google-fill"></i>
          </a>
        </div>
      </div>
</div>

<div class="wx-share-modal">
    <a class="modal-close" href="javascript:;"><i class="ri-close-circle-line"></i></a>
    <p>扫一扫，分享到微信</p>
    <div class="wx-qrcode">
      <img src="//api.qrserver.com/v1/create-qr-code/?size=150x150&data=http://example.com/2021/10/29/%E6%B1%89%E8%8B%B1%E8%AF%8D%E5%85%B8/" alt="微信分享二维码">
    </div>
</div>

<div id="share-mask"></div>  
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/difficult/" rel="tag">difficult</a></li></ul>

    </footer>
  </div>

   
  <nav class="article-nav">
    
      <a href="/2021/10/31/%E8%AF%84%E8%AE%BA%E5%8C%BA/" class="article-nav-link">
        <strong class="article-nav-caption">上一篇</strong>
        <div class="article-nav-title">
          
            评论区已开启
          
        </div>
      </a>
    
    
      <a href="/2021/10/28/itoa()%E5%87%BD%E6%95%B0%E5%88%97%E9%A2%98/" class="article-nav-link">
        <strong class="article-nav-caption">下一篇</strong>
        <div class="article-nav-title">进制转换函数 itoa() 详解</div>
      </a>
    
  </nav>

   
  <!-- valine评论 -->
  <div id="vcomments-box">
      <div id="vcomments">
      </div>
  </div>
  <script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
  <!-- <script src='https://cdn.jsdelivr.net/npm/valine@1.3.10/dist/Valine.min.js'></script> -->
  <script src="//unpkg.com/valine/dist/Valine.min.js"></script>
  <!-- 评论背景 -->                                                         
  <style>
      #veditor{min-height: 10rem;
          background-image: url(https://cdn.jsdelivr.net/gh/QshuRyaoF/MyPictureBed@master/img/1618192927489.jpeg);
          background-size: contain;
          background-repeat: no-repeat;
          background-position: right;
          background-color: rgba(255,255,255,0);
          resize: none;}
  </style>
  <!-- Valine配置 --> 
  <script>
      new Valine({
          el: '#vcomments',
      enableQQ: true,
          app_id: 'gHPDEu33BTRmL7LA4vTTcPH7-gzGzoHsz',
          app_key: 'LpFCGxGjaijgRjdNAMLaK8nu',
          path: window.location.pathname,
          //notify: '',
          //verify: '',
          avatar: 'monsterid',
          placeholder: '给我的文章加点评论吧~',
          recordIP: true,
      
      // 设置Bilibili表情包地址
      emojiCDN: 'https://cdn.jsdelivr.net/gh/XXXZhy/Blog_Image/valine_emoticon/', 
      // 表情title和图片映射
      emojiMaps: {
        "墙角滑稽": "害怕滑稽.gif",
        "仙女下凡": "仙女下凡.webp",
        "听歌": "听歌.webp",
        "嫌弃": "嫌弃.webp",
        "害羞": "害羞.webp",
        "彩虹滑稽": "彩虹滑稽.webp",
        "快走": "快走.webp",
        "扯脸": "扯脸.webp",
        "摸脸": "摸脸.webp",
        "流汗": "流汗.webp",
        "滑滑板": "滑滑板.webp",
        "点赞": "点赞.webp",
        "转圈圈": "转圈圈.webp",
        // ... 更多表情
      } 	
      });
      const infoEle = document.querySelector('#vcomments .info');
      if (infoEle && infoEle.childNodes && infoEle.childNodes.length > 0) {
          infoEle.childNodes.forEach(function (item) {
              item.parentNode.removeChild(item);
          });
      }
  </script>
  
  <style>
      #vcomments-box {
          padding: 5px 30px;
      }
  
      @media screen and (max-width: 800px) {
          #vcomments-box {
              padding: 5px 0px;
          }
      }
  
      #vcomments-box #vcomments {
          background-color: #fff;
      }
  
      .v .vlist .vcard .vh {
          padding-right: 20px;
      }
  
      .v .vlist .vcard {
          padding-left: 10px;
      }
  </style>
  
   
   
   
<!-- minivaline评论 -->
<div id="mvcomments-box">
  <div id="mvcomments"></div>
</div>
<script src="https://cdn.jsdelivr.net/npm/minivaline@6"></script>
<script>
  new MiniValine(Object.assign({"enable":"fals","serverURL":"https://minivaline.your-domain.com"}, {
    el: '#mvcomments',
  }));
  const infoEle = document.querySelector('#mvcomments .info');
  if (infoEle && infoEle.childNodes && infoEle.childNodes.length > 0) {
    infoEle.childNodes.forEach(function (item) {
      item.parentNode.removeChild(item);
    });
  }
</script>
<style>
  #mvcomments-box {
    padding: 5px 30px;
  }
  @media screen and (max-width: 800px) {
    #mvcomments-box {
      padding: 5px 0px;
    }
  }
  :root .darkmode {
    --ohhho-color-p: #bbb;
    --ohhho-color-text: #fff;
    --ohhho-color-card: #252d38;
    --ohhho-color-block: rgba(68, 68, 68, 0.65);
    --ohhho-expand-before-background: linear-gradient(
      180deg,
      rgba(246, 246, 246, 0),
      rgba(0, 0, 0, 0.9)
    );
    --ohhho-expand-after-background: rgba(0, 0, 0, 0.9);
  }
  .darkmode .ohhho pre {
    background: #888;
    border: 1px solid var(--ohhho-color-block);
  }
  .darkmode .ohhho .vlist .vcard .vcomment-body .vhead {
    filter: brightness(85%);
  }
</style>

    
</article>

</section>
      <footer class="footer">
  <div class="outer">
    <ul>
      <li>
        Copyrights &copy;
        2021
        <i class="ri-heart-fill heart_icon"></i> 舒窈
      </li>
    </ul>
    <ul>
      <li>
        
      </li>
    </ul>
    <ul>
      <li>
        
        
        <span>
  <span><i class="ri-user-3-fill"></i>访问人数:<span id="busuanzi_value_site_uv"></span></span>
  <span class="division">|</span>
  <span><i class="ri-eye-fill"></i>浏览次数:<span id="busuanzi_value_page_pv"></span></span>
</span>
        
      </li>
    </ul>
    <ul>
      
    </ul>
    <ul>
      
    </ul>
    <ul>
      <li>
        <!-- cnzz统计 -->
        
        <script type="text/javascript" src='https://s9.cnzz.com/z_stat.php?id=1278069914&amp;web_id=1278069914'></script>
        
      </li>
    </ul>
  </div>
</footer>    
    </main>
    <div class="float_btns">
      <div class="totop" id="totop">
  <i class="ri-arrow-up-line"></i>
</div>

<div class="todark" id="todark">
  <i class="ri-moon-line"></i>
</div>

    </div>
    <aside class="sidebar on">
      <button class="navbar-toggle"></button>
<nav class="navbar">
  
  <div class="logo">
    <a href="/"><img src="/images/ayer-side.svg" alt="半亩方塘"></a>
  </div>
  
  <ul class="nav nav-main">
    
    <li class="nav-item">
      <a class="nav-item-link" href="/">主页</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/archives">归档</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/categories">分类</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/tags">标签</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/analytics">统计</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/2021/about">关于我</a>
    </li>
    
  </ul>
</nav>
<nav class="navbar navbar-bottom">
  <ul class="nav">
    <li class="nav-item">
      
      <a class="nav-item-link nav-item-search"  title="搜索">
        <i class="ri-search-line"></i>
      </a>
      
      
      <a class="nav-item-link" target="_blank" href="/atom.xml" title="RSS Feed">
        <i class="ri-rss-line"></i>
      </a>
      
    </li>
  </ul>
</nav>
<div class="search-form-wrap">
  <div class="local-search local-search-plugin">
  <input type="search" id="local-search-input" class="local-search-input" placeholder="Search...">
  <div id="local-search-result" class="local-search-result"></div>
</div>
</div>
    </aside>
    <div id="mask"></div>

<!-- #reward -->
<div id="reward">
  <span class="close"><i class="ri-close-line"></i></span>
  <p class="reward-p"><i class="ri-cup-line"></i>请我喝杯咖啡吧~</p>
  <div class="reward-box">
    
    <div class="reward-item">
      <img class="reward-img" src="https://cdn.jsdelivr.net/gh/Shen-Yu/cdn/img/alipay.jpg">
      <span class="reward-type">支付宝</span>
    </div>
    
    
    <div class="reward-item">
      <img class="reward-img" src="https://cdn.jsdelivr.net/gh/Shen-Yu/cdn/img/wechat.jpg">
      <span class="reward-type">微信</span>
    </div>
    
  </div>
</div>
    
<script src="/js/jquery-3.6.0.min.js"></script>
 
<script src="/js/lazyload.min.js"></script>

<!-- Tocbot -->
 
<script src="/js/tocbot.min.js"></script>

<script>
  tocbot.init({
    tocSelector: ".tocbot",
    contentSelector: ".article-entry",
    headingSelector: "h1, h2, h3, h4, h5, h6",
    hasInnerContainers: true,
    scrollSmooth: true,
    scrollContainer: "main",
    positionFixedSelector: ".tocbot",
    positionFixedClass: "is-position-fixed",
    fixedSidebarOffset: "auto",
  });
</script>

<script src="https://cdn.jsdelivr.net/npm/jquery-modal@0.9.2/jquery.modal.min.js"></script>
<link
  rel="stylesheet"
  href="https://cdn.jsdelivr.net/npm/jquery-modal@0.9.2/jquery.modal.min.css"
/>
<script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/js/jquery.justifiedGallery.min.js"></script>

<script src="/dist/main.js"></script>

<!-- ImageViewer -->
 <!-- Root element of PhotoSwipe. Must have class pswp. -->
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

    <!-- Background of PhotoSwipe. 
         It's a separate element as animating opacity is faster than rgba(). -->
    <div class="pswp__bg"></div>

    <!-- Slides wrapper with overflow:hidden. -->
    <div class="pswp__scroll-wrap">

        <!-- Container that holds slides. 
            PhotoSwipe keeps only 3 of them in the DOM to save memory.
            Don't modify these 3 pswp__item elements, data is added later on. -->
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>

        <!-- Default (PhotoSwipeUI_Default) interface on top of sliding area. Can be changed. -->
        <div class="pswp__ui pswp__ui--hidden">

            <div class="pswp__top-bar">

                <!--  Controls are self-explanatory. Order can be changed. -->

                <div class="pswp__counter"></div>

                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>

                <button class="pswp__button pswp__button--share" style="display:none" title="Share"></button>

                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>

                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>

                <!-- Preloader demo http://codepen.io/dimsemenov/pen/yyBWoR -->
                <!-- element will get class pswp__preloader--active when preloader is running -->
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                        <div class="pswp__preloader__cut">
                            <div class="pswp__preloader__donut"></div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div>
            </div>

            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>

            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>

            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>

        </div>

    </div>

</div>

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.min.css">
<script src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js"></script>

<script>
    function viewer_init() {
        let pswpElement = document.querySelectorAll('.pswp')[0];
        let $imgArr = document.querySelectorAll(('.article-entry img:not(.reward-img)'))

        $imgArr.forEach(($em, i) => {
            $em.onclick = () => {
                // slider展开状态
                // todo: 这样不好，后面改成状态
                if (document.querySelector('.left-col.show')) return
                let items = []
                $imgArr.forEach(($em2, i2) => {
                    let img = $em2.getAttribute('data-idx', i2)
                    let src = $em2.getAttribute('data-target') || $em2.getAttribute('src')
                    let title = $em2.getAttribute('alt')
                    // 获得原图尺寸
                    const image = new Image()
                    image.src = src
                    items.push({
                        src: src,
                        w: image.width || $em2.width,
                        h: image.height || $em2.height,
                        title: title
                    })
                })
                var gallery = new PhotoSwipe(pswpElement, PhotoSwipeUI_Default, items, {
                    index: parseInt(i)
                });
                gallery.init()
            }
        })
    }
    viewer_init()
</script> 
<!-- MathJax -->

<!-- Katex -->

<!-- busuanzi  -->
 
<script src="/js/busuanzi-2.3.pure.min.js"></script>
 
<!-- ClickLove -->

<!-- ClickBoom1 -->

<!-- ClickBoom2 -->

<!-- CodeCopy -->
 
<link rel="stylesheet" href="/css/clipboard.css">
 <script src="https://cdn.jsdelivr.net/npm/clipboard@2/dist/clipboard.min.js"></script>
<script>
  function wait(callback, seconds) {
    var timelag = null;
    timelag = window.setTimeout(callback, seconds);
  }
  !function (e, t, a) {
    var initCopyCode = function(){
      var copyHtml = '';
      copyHtml += '<button class="btn-copy" data-clipboard-snippet="">';
      copyHtml += '<i class="ri-file-copy-2-line"></i><span>COPY</span>';
      copyHtml += '</button>';
      $(".highlight .code pre").before(copyHtml);
      $(".article pre code").before(copyHtml);
      var clipboard = new ClipboardJS('.btn-copy', {
        target: function(trigger) {
          return trigger.nextElementSibling;
        }
      });
      clipboard.on('success', function(e) {
        let $btn = $(e.trigger);
        $btn.addClass('copied');
        let $icon = $($btn.find('i'));
        $icon.removeClass('ri-file-copy-2-line');
        $icon.addClass('ri-checkbox-circle-line');
        let $span = $($btn.find('span'));
        $span[0].innerText = 'COPIED';
        
        wait(function () { // 等待两秒钟后恢复
          $icon.removeClass('ri-checkbox-circle-line');
          $icon.addClass('ri-file-copy-2-line');
          $span[0].innerText = 'COPY';
        }, 2000);
      });
      clipboard.on('error', function(e) {
        e.clearSelection();
        let $btn = $(e.trigger);
        $btn.addClass('copy-failed');
        let $icon = $($btn.find('i'));
        $icon.removeClass('ri-file-copy-2-line');
        $icon.addClass('ri-time-line');
        let $span = $($btn.find('span'));
        $span[0].innerText = 'COPY FAILED';
        
        wait(function () { // 等待两秒钟后恢复
          $icon.removeClass('ri-time-line');
          $icon.addClass('ri-file-copy-2-line');
          $span[0].innerText = 'COPY';
        }, 2000);
      });
    }
    initCopyCode();
  }(window, document);
</script>
 
<!-- CanvasBackground -->

<script>
  if (window.mermaid) {
    mermaid.initialize({ theme: "forest" });
  }
</script>


    
    

  </div>
</body>

</html>